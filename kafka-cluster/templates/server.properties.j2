{{ ansible_managed }}

{% if not kafka_cluster %}
broker.id=0
{% endif %}

{% if kafka_cluster %}
{%   for host in groups[ kafka_cluster_group_hosts ] %}
{%     if inventory_hostname == host %}
broker.id={{ loop.index0 }}
{%     endif %}
{%   endfor %}
{% endif %}


{% if not kafka_cluster %}
zookeeper.connect=localhost:2181
{% endif %}

{% if kafka_cluster %}
zookeeper.connect={% for node in groups[ kafka_cluster_group_hosts ] %}{{ hostvars[node]['ansible_all_ipv4_addresses'][0] }}:2181{% if not loop.last %},{% endif %}{%endfor%}
{% endif %}