- name: Install Apache Kafka 
  hosts: kafka_nodes

  pre_tasks:
    - name: Add mappings /etc/hosts
      become: yes
      blockinfile:
        path: /etc/hosts
        block: |
          {% for node in groups['kafka_nodes'] -%}
            {{ hostvars[node]['ansible_default_ipv4']['address'] }} {{ node }}
          {% endfor %}
        marker: "# {mark} ANSIBLE MANAGED BLOCK" 
      
  roles:
    - name: kafka-cluster
  
  post_tasks:
    - debug: 
       msg: "{{ kafka_zookeeper_dataDir }}"